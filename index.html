<!DOCTYPE html>
<html lang="en">
    
<head>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <script src="script.js"></script>
</head>
<!-- add source -->
<script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.js"></script>
<model-viewer src="deal_with_it_glasses_original.glb" ar ar-modes="webxr scene-viewer quick-look" camera-controls poster="poster.webp" shadow-intensity="1" camera-orbit="0deg 90deg 2m">
    <button class="Hotspot" slot="hotspot-4" data-position="-0.3968749996274709m 0.15876914296098388m -0.2716620357577808m" data-normal="-1m 0m 1.2246468525851679e-16m" data-visibility-attribute="visible">
        <div class="HotspotAnnotation">Temple Tip</div>
    </button>
    <!-- Your other hotspots and elements here -->
</model-viewer>
<body>
    <video id="cameraFeed" autoplay style="display: none;"></video>
    
    <script>
        const modelViewer = document.querySelector('model-viewer');
        const cameraFeed = document.getElementById('cameraFeed');
    
        // Function to handle hotspot clicks
        function rotateToHotspot(position) {
            modelViewer.cameraOrbit = `${position.x}deg ${position.y}deg ${position.z}m`;
        }
    
        // Add click event listeners to hotspots
        const hotspots = document.querySelectorAll('.Hotspot');
        hotspots.forEach((hotspot, index) => {
            hotspot.addEventListener('click', () => {
                const dataPosition = hotspot.getAttribute('data-position').split(' ');
                const position = {
                    x: parseFloat(dataPosition[0]),
                    y: parseFloat(dataPosition[1]),
                    z: parseFloat(dataPosition[2])
                };
                rotateToHotspot(position);
            });
        });

        // Access the front camera using getUserMedia
        async function startCamera() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'user' } });
                cameraFeed.srcObject = stream;
                cameraFeed.style.display = 'block';
            } catch (error) {
                console.error('Error accessing camera:', error);
            }
        }

        // Call the startCamera function to initiate camera access
        startCamera();
    </script>
</body>
</html>
